version: "1.0"
services:
  platform-ui:
    image: "platform-ui:1.1.2"
    container_name: platform-ui
    build:
      context: ../src/app
      dockerfile: platform-ui.Dockerfile
    ports:
      - "8443:8443"
    networks:
      - localnet
    volumes:
      - ../src/app/data_plugins:/app/data_plugins
      - ../src/app/validation_classes:/app/validation_classes
      - ../src/app/json_schema_templates:/app/json_schema_templates
      - ./secrets.toml:/app/.streamlit/secrets.toml
    restart: "no"

  requests-runner:
    image: "requests-runner:1.0.0"
    container_name: platform-ui
    build:
      context: ../src/app
      dockerfile: platform-ui.Dockerfile
    ports:
      - "8443:8443"
    networks:
      - localnet
    volumes:
      - ../src/app/data_plugins:/app/data_plugins
      - ../src/app/validation_classes:/app/validation_classes
      - ../src/app/json_schema_templates:/app/json_schema_templates
      - ./secrets.toml:/app/.streamlit/secrets.toml
    restart: "no"

networks:
  localnet:
    attachable: true

volumes:
  data_db: